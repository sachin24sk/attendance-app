<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ERP Attendance Dashboard</title>

<style>
body{font-family:Segoe UI;background:#eef2f7;padding:15px;}
table{width:100%;background:white;border-collapse:collapse;}
th{background:#1976d2;color:white;padding:8px;}
td{padding:8px;text-align:center;border-bottom:1px solid #eee;}
img{width:40px;height:40px;border-radius:50%;}
</style>
</head>

<body>

<h3>ðŸ“Š ERP Attendance Dashboard</h3>

<table>
<thead>
<tr>
<th>Photo</th>
<th>Name</th>
<th>Subject</th>
<th>Date</th>
<th>Time</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<script>

const tableBody=document.getElementById("tableBody");

/* SESSION CHECK */
fetch("/api/admin/attendance")
.then(r=>{
if(r.status===401){
location.href="/admin.html";
return;
}
return r.json();
})
.then(data=>{

tableBody.innerHTML="";

data.forEach(a=>{

const row=document.createElement("tr");

row.innerHTML=`
<td><img src="${a.photo}"></td>
<td>${a.name}</td>
<td>${a.subject}</td>
<td>${a.date}</td>
<td>${a.time}</td>
`;

tableBody.appendChild(row);

});

});

</script>

</body>
</html>
