<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ERP Admin Panel</title>

<style>

body{
margin:0;
font-family:Segoe UI;
background:linear-gradient(135deg,#1976d2,#42a5f5);
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
padding:15px;
}

.card{
background:white;
width:100%;
max-width:420px;
padding:22px;
border-radius:14px;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
text-align:center;
}

h3{
margin-top:0;
color:#1976d2;
}

input,select,button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:8px;
font-size:15px;
border:1px solid #ccc;
}

button{
background:#1976d2;
color:white;
font-weight:bold;
border:none;
cursor:pointer;
}

button:hover{
background:#1565c0;
}

.section{
margin-top:15px;
padding-top:10px;
border-top:1px solid #eee;
}

#panel{
display:none;
}

#status{
margin-top:8px;
color:#1976d2;
font-size:14px;
}

</style>
</head>

<body>

<div class="card">

<h3>ğŸ‘¨â€ğŸ« ERP Admin Panel</h3>

<!-- LOGIN -->
<select id="teacherId">
<option value="">Select Teacher</option>
<option value="teacher1">teacher1</option>
<option value="teacher2">teacher2</option>
</select>

<input id="password" type="password" placeholder="Password">

<button onclick="login()">Login</button>

<div id="status"></div>

<!-- ADMIN PANEL -->
<div id="panel">

<div class="section">

<h4>ğŸ“š Subject & Location</h4>

<select id="subject">
<option>B.Sc. 4th sem Mathematical Methods</option>
<option>B.Sc. 4th sem Ordinary Differential Equations</option>
<option>B.Sc. 4th sem Thermodynamics and Electronics Lab </option>
<option>B.Sc. 4th sem Electronics</option>
<option>B.Sc. 4th sem Inorganic Chemistry 2 (Major)</option>
<option>B.Sc. 4th sem Inorganic Chemistry 2 A (Minor)</option>
</select>

<button onclick="useMyLocation()">ğŸ“ Set My Location</button>
<button onclick="updateSettings()">ğŸ’¾ Update</button>

</div>

<div class="section">

<h4>ğŸ” Change Password</h4>

<input id="oldPass" type="password" placeholder="Old Password">
<input id="newPass" type="password" placeholder="New Password">

<button onclick="changePassword()">Change Password</button>

</div>

<div class="section">

<button onclick="openAttendance()">ğŸ“Š Open Attendance Dashboard</button>

</div>

</div>

</div>

<script>

let classLat=0;
let classLon=0;

const panel=document.getElementById("panel");
const statusBox=document.getElementById("status");

/* LOGIN */

function login(){

fetch("/api/admin/login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
id:teacherId.value,
password:password.value
})
})
.then(r=>r.json())
.then(d=>{

if(d.message==="Login success"){
statusBox.innerText="Login Success âœ”";
panel.style.display="block";
}else{
statusBox.innerText="Wrong login";
}

});

}

/* LOCATION */

function useMyLocation(){

navigator.geolocation.getCurrentPosition(pos=>{

classLat=pos.coords.latitude;
classLon=pos.coords.longitude;

statusBox.innerText="Location Set âœ”";

});

}

/* UPDATE SETTINGS */

function updateSettings(){

fetch("/api/admin/settings",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
subject:subject.value,
className:"BSc",
classLat,
classLon
})
})
.then(r=>r.json())
.then(d=>{
statusBox.innerText=d.message;
});

}

/* â­ CHANGE PASSWORD */

function changePassword(){

fetch("/api/admin/change-password",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
oldPassword:oldPass.value,
newPassword:newPass.value
})
})
.then(r=>r.json())
.then(d=>{
statusBox.innerText=d.message;
});

}

/* OPEN ATTENDANCE */

function openAttendance(){
location.href="/attendance.html";
}

</script>

</body>
</html>

